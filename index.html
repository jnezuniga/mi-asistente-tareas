<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- META TAGS PARA PWA (Progressive Web App) -->
    <meta name="theme-color" content="#667eea">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Mis Tareas">
    <meta name="description" content="Organiza tus tareas diarias de forma simple y efectiva">
    
    <!-- ICONOS PARA DISPOSITIVOS -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>üìù</text></svg>">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' rx='20' fill='%23667eea'/><text x='50' y='75' font-size='60' text-anchor='middle' fill='white'>üìù</text></svg>">
    
    <title>Mi Asistente de Tareas v1.5</title>
    
    <style>
        /* ===== RESET Y VARIABLES ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent; /* Quita el flash azul en m√≥viles */
        }

        :root {
            --primary-color: #667eea;
            --primary-dark: #5568d3;
            --secondary-color: #764ba2;
            --success-color: #4CAF50;
            --danger-color: #ff6b6b;
            --text-dark: #333;
            --text-light: #666;
            --text-lighter: #999;
            --bg-light: #f8f9fa;
            --bg-completed: #e8f5e9;
            --border-color: #e0e0e0;
            --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.1);
            --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.15);
            --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.2);
        }

        /* ===== ESTILOS GENERALES ===== */
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            min-height: 100vh;
            padding: 12px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            padding-top: 20px;
            padding-bottom: 40px;
        }

        /* ===== CONTENEDOR PRINCIPAL ===== */
        .container {
            background: white;
            border-radius: 24px;
            box-shadow: var(--shadow-lg);
            width: 100%;
            max-width: 640px;
            padding: 24px;
            /* Mejor rendimiento en m√≥viles */
            will-change: transform;
            transform: translateZ(0);
        }

        /* OPTIMIZACI√ìN M√ìVIL */
        @media (max-width: 640px) {
            body {
                padding: 8px;
                padding-top: 12px;
                padding-bottom: 80px; /* Espacio para el footer fijo */
            }
            
            .container {
                padding: 20px 16px;
                border-radius: 20px;
            }
        }

        /* ===== ENCABEZADO ===== */
        .header {
            text-align: center;
            margin-bottom: 24px;
        }

        h1 {
            color: var(--text-dark);
            margin-bottom: 8px;
            font-size: 1.8em;
            font-weight: 700;
        }

        @media (max-width: 640px) {
            h1 {
                font-size: 1.5em;
            }
        }

        .subtitle {
            color: var(--text-light);
            font-size: 0.9em;
            font-weight: 400;
        }

        /* ===== FORMULARIO PARA A√ëADIR TAREAS ===== */
        .add-task-form {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 24px;
        }

        @media (min-width: 640px) {
            .add-task-form {
                flex-direction: row;
            }
        }

        #taskInput {
            flex: 1;
            padding: 16px 18px;
            border: 2px solid var(--border-color);
            border-radius: 14px;
            font-size: 16px; /* Evita zoom autom√°tico en iOS */
            transition: all 0.3s ease;
            background: white;
        }

        #taskInput:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        #addButton {
            padding: 16px 32px;
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: white;
            border: none;
            border-radius: 14px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-sm);
            /* Mejora la sensaci√≥n t√°ctil */
            touch-action: manipulation;
            user-select: none;
        }

        #addButton:active {
            transform: scale(0.98);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        /* ===== ESTAD√çSTICAS ===== */
        .stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-bottom: 24px;
        }

        .stat-item {
            background: var(--bg-light);
            padding: 16px;
            border-radius: 14px;
            text-align: center;
            transition: transform 0.2s ease;
        }

        .stat-item:active {
            transform: scale(0.98);
        }

        .stat-number {
            font-size: 2em;
            font-weight: 700;
            color: var(--primary-color);
            display: block;
        }

        .stat-label {
            font-size: 0.85em;
            color: var(--text-light);
            margin-top: 4px;
            display: block;
        }

        @media (max-width: 640px) {
            .stat-number {
                font-size: 1.75em;
            }
            .stat-label {
                font-size: 0.8em;
            }
        }

        /* ===== LISTA DE TAREAS ===== */
        .tasks-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
            gap: 12px;
        }

        h2 {
            color: var(--text-dark);
            font-size: 1.3em;
            font-weight: 600;
        }

        @media (max-width: 640px) {
            h2 {
                font-size: 1.1em;
            }
        }

        #clearCompleted {
            padding: 10px 16px;
            background: var(--danger-color);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 600;
            transition: all 0.3s ease;
            touch-action: manipulation;
            white-space: nowrap;
        }

        #clearCompleted:active {
            transform: scale(0.95);
            background: #ff5252;
        }

        #taskList {
            list-style: none;
        }

        .task-item {
            background: var(--bg-light);
            padding: 16px;
            margin-bottom: 12px;
            border-radius: 14px;
            display: flex;
            align-items: flex-start;
            gap: 12px;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            touch-action: manipulation;
        }

        .task-item:active {
            transform: scale(0.99);
        }

        .task-item.completed {
            opacity: 0.7;
            background: var(--bg-completed);
        }

        .task-checkbox {
            width: 28px;
            height: 28px;
            min-width: 28px;
            cursor: pointer;
            accent-color: var(--primary-color);
            margin-top: 2px;
        }

        .task-content {
            flex: 1;
            min-width: 0; /* Permite que el texto se trunque */
        }

        .task-text {
            font-size: 15px;
            color: var(--text-dark);
            line-height: 1.5;
            word-wrap: break-word;
            margin-bottom: 6px;
        }

        .task-item.completed .task-text {
            text-decoration: line-through;
            color: var(--text-lighter);
        }

        .task-time {
            font-size: 12px;
            color: var(--text-lighter);
        }

        .delete-button {
            background: var(--danger-color);
            color: white;
            border: none;
            padding: 10px 14px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 600;
            transition: all 0.3s ease;
            touch-action: manipulation;
            white-space: nowrap;
        }

        .delete-button:active {
            transform: scale(0.95);
            background: #ff5252;
        }

        /* ===== MENSAJE CUANDO NO HAY TAREAS ===== */
        .empty-state {
            text-align: center;
            padding: 48px 20px;
            color: var(--text-lighter);
        }

        .empty-state-icon {
            font-size: 4em;
            margin-bottom: 16px;
        }

        .empty-state p {
            font-size: 1em;
            margin-bottom: 8px;
        }

        /* ===== PIE DE P√ÅGINA ===== */
        .footer {
            margin-top: 32px;
            text-align: center;
            color: var(--text-lighter);
            font-size: 0.85em;
            padding: 16px;
            background: var(--bg-light);
            border-radius: 12px;
        }

        .footer p {
            margin-bottom: 12px;
        }

        #debugButton {
            margin-top: 12px;
            padding: 12px 20px;
            background: var(--success-color);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            font-size: 14px;
            transition: all 0.3s ease;
            touch-action: manipulation;
        }

        #debugButton:active {
            transform: scale(0.95);
            background: #45a049;
        }

        /* ===== ANIMACI√ìN DE ENTRADA ===== */
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .task-item {
            animation: slideIn 0.3s ease-out;
        }

        /* ===== MEJORAS DE ACCESIBILIDAD ===== */
        button:focus-visible,
        input:focus-visible {
            outline: 3px solid var(--primary-color);
            outline-offset: 2px;
        }

        /* ===== LOADING INDICATOR (opcional) ===== */
        .loading {
            opacity: 0.6;
            pointer-events: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- ENCABEZADO -->
        <div class="header">
            <h1>üìù Mi Asistente de Tareas</h1>
            <p class="subtitle">Versi√≥n 1.5 - Optimizado para m√≥vil</p>
        </div>

        <!-- FORMULARIO PARA A√ëADIR TAREAS -->
        <div class="add-task-form">
            <input 
                type="text" 
                id="taskInput" 
                placeholder="¬øQu√© necesitas hacer hoy?"
                autocomplete="off"
                aria-label="Nueva tarea"
            >
            <button id="addButton" aria-label="A√±adir tarea">A√±adir</button>
        </div>

        <!-- ESTAD√çSTICAS -->
        <div class="stats">
            <div class="stat-item">
                <span class="stat-number" id="totalTasks">0</span>
                <span class="stat-label">Total</span>
            </div>
            <div class="stat-item">
                <span class="stat-number" id="pendingTasks">0</span>
                <span class="stat-label">Pendientes</span>
            </div>
            <div class="stat-item">
                <span class="stat-number" id="completedTasks">0</span>
                <span class="stat-label">Completadas</span>
            </div>
        </div>

        <!-- LISTA DE TAREAS -->
        <div class="tasks-header">
            <h2>Mis Tareas</h2>
            <button id="clearCompleted" aria-label="Limpiar tareas completadas">Limpiar</button>
        </div>
        
        <ul id="taskList" role="list">
            <!-- Las tareas se a√±adir√°n aqu√≠ din√°micamente -->
        </ul>

        <div id="emptyState" class="empty-state">
            <div class="empty-state-icon">‚ú®</div>
            <p>No tienes tareas pendientes</p>
            <p style="font-size: 0.9em; margin-top: 10px;">¬°A√±ade tu primera tarea arriba!</p>
        </div>

        <!-- PIE DE P√ÅGINA -->
        <div class="footer">
            <p>üí° Presiona Enter para a√±adir r√°pidamente</p>
            <button id="debugButton">üêõ Ver Tareas en Consola</button>
        </div>
    </div>

    <script>
        // ===== VARIABLES GLOBALES =====
        let tasks = [];

        // ===== ELEMENTOS DEL DOM =====
        const taskInput = document.getElementById('taskInput');
        const addButton = document.getElementById('addButton');
        const taskList = document.getElementById('taskList');
        const emptyState = document.getElementById('emptyState');
        const clearCompletedButton = document.getElementById('clearCompleted');
        
        // Elementos de estad√≠sticas
        const totalTasksElement = document.getElementById('totalTasks');
        const pendingTasksElement = document.getElementById('pendingTasks');
        const completedTasksElement = document.getElementById('completedTasks');

        // ===== CARGAR TAREAS AL INICIAR =====
        window.addEventListener('load', () => {
            loadTasksFromStorage();
            renderTasks();
        });

        // ===== FUNCI√ìN PARA A√ëADIR TAREA =====
        function addTask() {
            const taskText = taskInput.value.trim();
            
            if (taskText === '') {
                // En m√≥vil, mejor usar vibraci√≥n si est√° disponible
                if (navigator.vibrate) {
                    navigator.vibrate(100);
                }
                alert('Por favor escribe una tarea');
                return;
            }

            const task = {
                id: Date.now(),
                text: taskText,
                completed: false,
                createdAt: new Date().toLocaleString('es-ES')
            };

            tasks.push(task);
            taskInput.value = '';
            taskInput.focus();

            // Feedback t√°ctil
            if (navigator.vibrate) {
                navigator.vibrate(50);
            }

            saveTasksToStorage();
            renderTasks();
        }

        // ===== FUNCI√ìN PARA MARCAR TAREA COMO COMPLETADA =====
        function toggleTask(id) {
            const task = tasks.find(t => t.id === id);
            if (task) {
                task.completed = !task.completed;
                
                // Feedback t√°ctil
                if (navigator.vibrate) {
                    navigator.vibrate(30);
                }
                
                saveTasksToStorage();
                renderTasks();
            }
        }

        // ===== FUNCI√ìN PARA ELIMINAR TAREA =====
        function deleteTask(id) {
            if (confirm('¬øEliminar esta tarea?')) {
                tasks = tasks.filter(t => t.id !== id);
                
                // Feedback t√°ctil
                if (navigator.vibrate) {
                    navigator.vibrate([50, 50, 50]);
                }
                
                saveTasksToStorage();
                renderTasks();
            }
        }

        // ===== FUNCI√ìN PARA LIMPIAR TAREAS COMPLETADAS =====
        function clearCompleted() {
            const completedCount = tasks.filter(t => t.completed).length;
            
            if (completedCount === 0) {
                alert('No hay tareas completadas para eliminar');
                return;
            }

            if (confirm(`¬øEliminar ${completedCount} tarea(s) completada(s)?`)) {
                tasks = tasks.filter(t => !t.completed);
                saveTasksToStorage();
                renderTasks();
            }
        }

        // ===== FUNCI√ìN PARA RENDERIZAR TAREAS EN LA PANTALLA =====
        function renderTasks() {
            taskList.innerHTML = '';

            if (tasks.length === 0) {
                emptyState.style.display = 'block';
                updateStats();
                return;
            } else {
                emptyState.style.display = 'none';
            }

            tasks.forEach(task => {
                const li = document.createElement('li');
                li.className = `task-item ${task.completed ? 'completed' : ''}`;
                li.setAttribute('role', 'listitem');
                
                li.innerHTML = `
                    <input 
                        type="checkbox" 
                        class="task-checkbox" 
                        ${task.completed ? 'checked' : ''}
                        onchange="toggleTask(${task.id})"
                        aria-label="Marcar tarea como ${task.completed ? 'no completada' : 'completada'}"
                    >
                    <div class="task-content">
                        <div class="task-text">${escapeHtml(task.text)}</div>
                        <div class="task-time">${task.createdAt}</div>
                    </div>
                    <button 
                        class="delete-button" 
                        onclick="deleteTask(${task.id})"
                        aria-label="Eliminar tarea"
                    >
                        üóëÔ∏è
                    </button>
                `;

                taskList.appendChild(li);
            });

            updateStats();
        }

        // ===== FUNCI√ìN PARA ESCAPAR HTML (SEGURIDAD) =====
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // ===== FUNCI√ìN PARA ACTUALIZAR ESTAD√çSTICAS =====
        function updateStats() {
            const total = tasks.length;
            const completed = tasks.filter(t => t.completed).length;
            const pending = total - completed;

            totalTasksElement.textContent = total;
            completedTasksElement.textContent = completed;
            pendingTasksElement.textContent = pending;
        }

        // ===== FUNCIONES DE ALMACENAMIENTO LOCAL =====
        function saveTasksToStorage() {
            try {
                localStorage.setItem('myTasks', JSON.stringify(tasks));
            } catch (e) {
                console.error('Error guardando tareas:', e);
                alert('Error al guardar. ¬øAlmacenamiento lleno?');
            }
        }

        function loadTasksFromStorage() {
            try {
                const savedTasks = localStorage.getItem('myTasks');
                if (savedTasks) {
                    tasks = JSON.parse(savedTasks);
                }
            } catch (e) {
                console.error('Error cargando tareas:', e);
                tasks = [];
            }
        }

        // ===== EVENT LISTENERS =====
        addButton.addEventListener('click', addTask);

        taskInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                addTask();
            }
        });

        clearCompletedButton.addEventListener('click', clearCompleted);

        // ===== BOT√ìN DE DEBUG =====
        const debugButton = document.getElementById('debugButton');

        debugButton.addEventListener('click', () => {
            console.clear();
            console.log('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê');
            console.log('üêõ DEBUG - Estado de la Aplicaci√≥n');
            console.log('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê');
            console.log('üìä Total de tareas:', tasks.length);
            console.log('üìã Array completo de tareas:', tasks);
            console.log('');
            console.log('üì¶ Contenido del localStorage:');
            console.log(localStorage.getItem('myTasks'));
            console.log('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê');
            
            if (tasks.length > 0) {
                console.log('üìù Detalles de cada tarea:');
                tasks.forEach((task, index) => {
                    console.log(`\nTarea ${index + 1}:`);
                    console.log('  ‚îú‚îÄ ID:', task.id);
                    console.log('  ‚îú‚îÄ Texto:', task.text);
                    console.log('  ‚îú‚îÄ Completada:', task.completed ? '‚úÖ S√≠' : '‚ùå No');
                    console.log('  ‚îî‚îÄ Creada:', task.createdAt);
                });
            } else {
                console.log('‚ö†Ô∏è No hay tareas para mostrar');
            }
            
            console.log('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê');
            console.log('üí° Tip: Puedes editar el array "tasks" desde aqu√≠');
            console.log('Ejemplo: tasks[0].text = "Nueva tarea"');
            
            alert('Revisa la consola del navegador (F12) üîç');
        });

        // ===== MENSAJE DE BIENVENIDA =====
        console.log('üéâ ¬°Bienvenido a tu Asistente de Tareas v1.5!');
        console.log('üì± Optimizado para dispositivos m√≥viles');
        console.log('üíæ Usando localStorage para persistencia');
    </script>
</body>
</html>
